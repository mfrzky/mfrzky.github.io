@include('welcome')
<div class="main" id="main-content">
    <header class="bg-header-menu">
      <div class="p-3">
        <i class="fa-solid fa-credit-card nav_icon"></i>
        <span>INVOICES</span>
      </div>
    </header>
  
    <div class="p-3">
      <table id="invoices-list" class="display table table-bordered" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>No Invoices</th>
                <th>Tanggal</th>
                <th>No Faktur Pajak</th>
                <th>Tanggal Pajak</th>
                <th>Cur</th>
                <th>DPP</th>
                <th>PPN</th>
                <th>DPP + PPN</th>
                <th>PPH</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>13&14/KOP/5/IV/23</td>
                <td>09 April 2023</td>
                <td>-</td>
                <td>09 April 2023</td>
                <td>IDR</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-pencil"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-upload"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-print"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                </td>
            </tr>
            <tr>
                <td>14&15/KOP/17/IV/23</td>
                <td>09 April 2023</td>
                <td>-</td>
                <td>09 April 2023</td>
                <td>IDR</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-pencil"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-upload"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-print"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                </td>
            </tr>
            <tr>
                <td>15&16/KOP/5/IV/23</td>
                <td>09 April 2023</td>
                <td>-</td>
                <td>09 April 2023</td>
                <td>IDR</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-pencil"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-upload"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-print"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                </td>
            </tr>
            <tr>
                <td>15&16/KOP/5/IV/23</td>
                <td>09 April 2023</td>
                <td>-</td>
                <td>09 April 2023</td>
                <td>IDR</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-pencil"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-upload"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-print"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                </td>
            </tr>
            <tr>
                <td>15&16/KOP/5/IV/23</td>
                <td>09 April 2023</td>
                <td>-</td>
                <td>09 April 2023</td>
                <td>IDR</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-pencil"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-upload"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-print"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                </td>
            </tr>
            <tr>
                <td>15&16/KOP/5/IV/23</td>
                <td>09 April 2023</td>
                <td>-</td>
                <td>09 April 2023</td>
                <td>IDR</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-pencil"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-upload"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-print"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                </td>
            </tr>
            <tr>
                <td>15&16/KOP/5/IV/23</td>
                <td>09 April 2023</td>
                <td>-</td>
                <td>09 April 2023</td>
                <td>IDR</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-pencil"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-upload"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-print"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                </td>
            </tr>
            <tr>
                <td>15&16/KOP/5/IV/23</td>
                <td>09 April 2023</td>
                <td>-</td>
                <td>09 April 2023</td>
                <td>IDR</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-pencil"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-upload"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-print"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                </td>
            </tr>
            <tr>
                <td>15&16/KOP/5/IV/23</td>
                <td>09 April 2023</td>
                <td>-</td>
                <td>09 April 2023</td>
                <td>IDR</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>137,639,750</td>
                <td>0</td>
                <td>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-pencil"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-upload"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-print"></i>
                    </button>
                    <button class="btn border-0 p-0">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                </td>
            </tr>
            
        </tbody>
      </table>
    </div>
    
    <div class="p-3">
      <div class="p-2 w-100 bg-header-menu rounded-top d-flex justify-content-between align-items-center">
        <div>
            <i class="fa-solid fa-file-lines"></i>
            <span>ITEMS</span>
        </div>
        <div>
            <button class="btn border-0 p-0" type="button" data-bs-toggle="modal" data-bs-target="#ModalInvoicesItemType">
                <i class="fa-solid fa-plus fa-lg"></i>
            </button>
        </div>
      </div>
      <table id="invoices-item" class="display table table-bordered" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th></th>
                <th>No Surat Jalan</th>
                <th>No PO</th>
                <th>Tanggal Bayar</th>
                <th>No Voucher</th>
                <th>Nilai</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            
        </tbody>
      </table>
    </div>
  
    {{-- Modal Add Surat Jalan --}}
    <div class="modal fade" id="ModalAddListInvoices" tabindex="-1" aria-labelledby="ModalAddListInvoices" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="ModalAddListInvoicesLabel">Invoice</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-3">
                        <label for="noInvoices">No Invoices</label>
                        <label for="tgl" class="mt-3">Tanggal</label>
                        <label for="cur" class="mt-3">Currency</label>
                        <label for="noFP" class="mt-3">No Faktur Pajak</label>
                        <label for="tglPjk" class="mt-1">Tanggal Pajak</label>
                    </div>
                    <div class="col-9"> 
                        <form action="">
                            <div class="input-group">
                                <input type="text" class="form-control" id="noInvoices" required>
                            </div>
                            <div class="input-group mt-1">
                                <input type="date" class="form-control" id="tgl" required>
                            </div>
                            <div class="input-group mt-1">
                                <select id="cur" class="form-select" required>
                                    <option hidden value="">Choose Cureency</option>
                                    <option value="">IDR</option>
                                    <option value="">USD</option>
                                </select>
                            </div>
                            <div class="input-group mt-1">
                                <input type="text" class="form-control" id="noFP" required>
                            </div>
                            <div class="input-group mt-1">
                                <input type="date" class="form-control" id="tglPjk" required>
                            </div>

                            <div class="modal-footer border-0 px-0">
                                <button type="submit" class="btn btn-primary">OK</button>
                                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                            </div>
                        </form>                 
                    </div>
                </div>
            </div>
          </div>
        </div>
    </div>
    
    {{-- Modal Invoices Item Type --}}
    <div class="modal fade" id="ModalInvoicesItemType" tabindex="-1" aria-labelledby="ModalInvoicesItemType" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="ModalInvoicesItemTypeLabel">Invoices Item Type</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <button class="btn border w-100">
                    Uang Muka
                </button>
                <button class="btn border my-3 w-100" type="button" data-bs-toggle="modal" data-bs-target="#ModalDaftarSuratJalan">
                    Surat Jalan
                </button>
                <button class="btn border w-100" data-bs-dismiss="modal">
                    Cancel
                </button>
            </div>
          </div>
        </div>
    </div>

    {{-- Modal Daftar PO --}}
    <div class="modal fade" id="ModalDaftarPO" tabindex="-1" aria-labelledby="ModalDaftarPOLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ModalDaftarPOLabel">Purchase Orders</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div>
                        <table id="daftar-po" class="display table table-bordered" cellspacing="0" width="100%">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>Deskripsi</th>
                                    <th>Quantity</th>
                                    <th>Satuan</th>
                                    <th>Harga Satuan</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>FILTER: U/MASKER HIJAU</td>
                                    <td>21250</td>
                                    <td>PCS</td>
                                    <td>65</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>SARUNG TANGAN: KATUN B-4</td>
                                    <td>7650</td>
                                    <td>SET</td>
                                    <td>1200</td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>SARUNG TANGAN KARET PANJANG</td>
                                    <td>16800</td>
                                    <td>PASANG</td>
                                    <td>1500</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {{-- Modal Daftar Surat Jalan --}}
    <div class="modal fade" id="ModalDaftarSuratJalan" tabindex="-1" aria-labelledby="ModalDaftarSuratJalanLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ModalDaftarSuratJalanLabel">Surat Jalan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div>
                        <table id="daftar-surat-jalan" class="display table table-bordered" cellspacing="0" width="100%">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>No Surat Jalan</th>
                                    <th>Tanggal</th>
                                    <th>No PO</th>
                                    <th>No BPB</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>0050/IIX/23</td>
                                    <td>8/1/2023</td>
                                    <td>02101/2023</td>
                                    <td>2169/SP/23</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>240/VII/23</td>
                                    <td>7/31/2023</td>
                                    <td>08345/2023</td>
                                    <td>F0624/WH23</td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>243/VII/23</td>
                                    <td>8/4/2023</td>
                                    <td>08345/2023</td>
                                    <td>F06238/WH23</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">OK</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>
  
<script type="text/javascript">
    // ----------------------------------------------------------TABLE LIST & TABLE ITEM----------------------------------------------------------
    $('#invoices-list').dataTable({
        responsive: true,
        bInfo: false,
        scrollCollapse: true,
        scrollY: '20vh',
        language: {
        search: "No Invoices",
        lengthMenu: "Full _MENU_",
        paginate: {
            first: `<i class="fa-solid fa-angles-left"></i>`,
            last: `<i class="fa-solid fa-angles-right"></i>`,
            previous: `<i class="fa-solid fa-chevron-left"></i>`,
            next: `<i class="fa-solid fa-chevron-right"></i>`,
        }
        },
        sDom: '<"toolbar">Blfrtip<"reloadList">',
        pagingType: 'input',
        lengthChange: false,
    });

    $('#invoices-item').dataTable({
        responsive: true,
        bInfo: false,
        scrollCollapse: true,
        scrollY: '20vh',
        searching: false,
        language: {
        paginate: {
            first: `<i class="fa-solid fa-angles-left"></i>`,
            last: `<i class="fa-solid fa-angles-right"></i>`,
            previous: `<i class="fa-solid fa-chevron-left"></i>`,
            next: `<i class="fa-solid fa-chevron-right"></i>`,
        }
        },
        sDom: '<"reloadItem">Blfrtip',
        pagingType: 'input',
        lengthChange: false
    });

    $('div.toolbar').html(`<div class="p-2 w-100 bg-header-menu rounded-top d-flex justify-content-between align-items-center">
        <div>
            <i class="fa-solid fa-truck nav_icon"></i>
            <span>LIST</span>
        </div>
        <div>
            <button class="btn border-0 p-0" type="button" data-bs-toggle="modal" data-bs-target="#ModalAddListInvoices">
                <i class="fa-solid fa-plus fa-lg"></i>
            </button>
        </div>
    </div>`).insertAfter(".dataTables_filter");

    $('div.reloadList').html(`<div class="p-2 float-end">
        <button class="btn py-0 border-0 reloadListTable" type="button">
        <i class="fa-solid fa-arrows-rotate"></i>
        </button>
    </div>`).insertBefore(".dataTables_paginate paging_input");

    $('div.reloadItem').html(`<div class="p-2 float-end">
        <button class="btn py-0 border-0 reloadItemTable" type="button">
        <i class="fa-solid fa-arrows-rotate"></i>
        </button>
    </div>`).insertAfter($("#invoices-item_wrapper > .dataTables_scroll > .dataTables_scrollBody"));

    var tInvoicesList = $('#invoices-list').DataTable();
    var tInvoicesItem = $('#invoices-item').DataTable();
    $('#invoices-list tbody').on('click', 'tr', function () {
        const noInvoices = tInvoicesList.row(this).data()[0];
        var selectedRows = tInvoicesItem.rows( { selected: true } ).count();
        
        console.log(noInvoices);
        if (selectedRows > 0 && (noInvoices == '13&amp;14/KOP/5/IV/23' || noInvoices == '14&amp;15/KOP/17/IV/23')) {
            Swal.fire({
                type: 'warning',
                title: 'List sudah ditambahkan!',
                text: 'Silahkan refresh table items'
            });
            return
        } else {
            if (noInvoices == '13&amp;14/KOP/5/IV/23') {
                tInvoicesItem.rows.add(
                    [
                        ["1", "247/IIX/23", "0918/2023", "-", "BD17/23/400345", "1,848,000", 
                            `<button class="btn border-0 p-0 me-3" data-bs-toggle="modal" data-bs-target="#ModalDaftarPO">
                                <i class="fa-solid fa-ellipsis"></i>
                            </button>
                            <button class="btn border-0 p-0 me-3">
                                <i class="fa-solid fa-trash-can"></i>
                            </button>`],
                        ["2", "246/IIX/23", "0918/2023", "-", "BD17/23/400345", "100,675,650", 
                            `<button class="btn border-0 p-0 me-3" data-bs-toggle="modal" data-bs-target="#ModalDaftarPO">
                                <i class="fa-solid fa-ellipsis"></i>
                            </button>
                            <button class="btn border-0 p-0 me-3">
                                <i class="fa-solid fa-trash-can"></i>
                            </button>`],
                        ["3", "0048/IIX/23", "0918/2023", "-", "BD17/23/400345", "1,320,000", 
                            `<button class="btn border-0 p-0 me-3" data-bs-toggle="modal" data-bs-target="#ModalDaftarPO">
                                <i class="fa-solid fa-ellipsis"></i>
                            </button>
                            <button class="btn border-0 p-0 me-3">
                                <i class="fa-solid fa-trash-can"></i>
                            </button>`],
                    ]
                ).draw()
            } else if (noInvoices == '14&amp;15/KOP/17/IV/23') {
                tInvoicesItem.rows.add(
                    [
                        ["1", "245/IIX/23", "0918/2023", "-", "BD17/23/400345", "1,848,000", 
                            `<button class="btn border-0 p-0 me-3" data-bs-toggle="modal" data-bs-target="#ModalDaftarPO">
                                <i class="fa-solid fa-ellipsis"></i>
                            </button>
                            <button class="btn border-0 p-0 me-3">
                                <i class="fa-solid fa-trash-can"></i>
                            </button>`],
                        ["2", "243/IIX/23", "0918/2023", "-", "BD17/23/400345", "100,675,650", 
                            `<button class="btn border-0 p-0 me-3" data-bs-toggle="modal" data-bs-target="#ModalDaftarPO">
                                <i class="fa-solid fa-ellipsis"></i>
                            </button>
                            <button class="btn border-0 p-0 me-3">
                                <i class="fa-solid fa-trash-can"></i>
                            </button>`],
                        ["3", "0050/IIX/23", "0918/2023", "-", "BD17/23/400345", "1,320,000", 
                            `<button class="btn border-0 p-0 me-3" data-bs-toggle="modal" data-bs-target="#ModalDaftarPO">
                                <i class="fa-solid fa-ellipsis"></i>
                            </button>
                            <button class="btn border-0 p-0 me-3">
                                <i class="fa-solid fa-trash-can"></i>
                            </button>`],
                    ]
                ).draw()
            }
        }
    });

    $('.reloadItemTable').on('click', function() {
        tInvoicesItem.clear().draw();
    })

    // ----------------------------------------------------------TABLE MODAL CONTROL DELIVERY----------------------------------------------------------
    $('#surat-jalan').dataTable({
        responsive: true,
        bInfo: false,
        scrollCollapse: true,
        scrollY: '10vh',
        searching: false,
        language: {
        paginate: {
            first: `<i class="fa-solid fa-angles-left"></i>`,
            last: `<i class="fa-solid fa-angles-right"></i>`,
            previous: `<i class="fa-solid fa-chevron-left"></i>`,
            next: `<i class="fa-solid fa-chevron-right"></i>`,
        }
        },
        pagingType: 'input',
        lengthChange: false
    });

    $('#bon-penerimaan-barang').dataTable({
        responsive: true,
        bInfo: false,
        scrollCollapse: true,
        scrollY: '10vh',
        scrollX: true,
        searching: false,
        language: {
        paginate: {
            first: `<i class="fa-solid fa-angles-left"></i>`,
            last: `<i class="fa-solid fa-angles-right"></i>`,
            previous: `<i class="fa-solid fa-chevron-left"></i>`,
            next: `<i class="fa-solid fa-chevron-right"></i>`,
        }
        },
        pagingType: 'input',
        lengthChange: false
    });

    $('#bon-retur-barang').dataTable({
        responsive: true,
        bInfo: false,
        scrollCollapse: true,
        scrollY: '10vh',
        searching: false,
        language: {
        paginate: {
            first: `<i class="fa-solid fa-angles-left"></i>`,
            last: `<i class="fa-solid fa-angles-right"></i>`,
            previous: `<i class="fa-solid fa-chevron-left"></i>`,
            next: `<i class="fa-solid fa-chevron-right"></i>`,
        }
        },
        pagingType: 'input',
        lengthChange: false
    });
// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
</script>